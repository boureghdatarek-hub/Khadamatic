<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø®Ø¯Ù…Ø§ØªÙŠ - ØªØ³ÙˆÙ‚ Ù…Ù†Ø²Ù„ÙŠ</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f8f9fa; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: auto; }
        h1 { color: #2d3436; text-align: center; }
        .section-title { background: #27ae60; color: white; padding: 10px; border-radius: 5px; margin-top: 20px; }
        .card { background: white; padding: 15px; margin: 10px 0; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }
        .price { color: #e67e22; font-weight: bold; }
        .delivery-info { font-size: 0.9em; color: #636e72; }
        .btn-add { background: #2ecc71; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; }
        #cart-bar { position: fixed; bottom: 0; left: 0; right: 0; background: #2d3436; color: white; padding: 15px; text-align: center; font-size: 1.2em; display: none; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ¥¦ Ù…Ù†ØµØ© Ø®Ø¯Ù…Ø§ØªÙŠ Ù„Ù„ØªØ³ÙˆÙ‚ ğŸ</h1>
    <div id="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„...</div>
    
    <div id="products-list"></div>
    
    <div id="delivery-section">
        <div class="section-title">Ø§Ù„Ù…ÙˆØµÙ„ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</div>
        <div id="deliverers-list"></div>
    </div>
</div>

<div id="cart-bar" onclick="sendOrder()">
    Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨: <span id="total-price">0</span> Ø¯Ø¬ | Ø£Ø±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ğŸ›’
</div>

<script>
    // Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ API Ø§Ù„Ø°ÙŠ Ø¸Ù‡Ø±Øª ÙÙŠÙ‡ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
    const scriptURL = "https://script.google.com/macros/s/AKfycby19aP0Ofccl0njWFiUfA-7Xqv_O8wANzfQ1foFoxWMTDGTa2EfoTC2D1GdR58wAYaEdQ/exec"; 
    let cart = [];
    let total = 0;

    fetch(scriptURL)
            .then(res => res.json())
            .then(data => {
                document.getElementById('loading').style.display = 'none';
                let html = '';

                // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø§Ù„Ø®Ø¶Ø±ÙˆØ§Øª ÙˆØ§Ù„ÙÙˆØ§ÙƒÙ‡)
                const allProducts = data.veg.concat(data.fruit);
                allProducts.forEach(item => {
                    // Ø­Ø³Ø¨ ØªØ±ØªÙŠØ¨Ùƒ: item[0] Ù‡Ùˆ Ø§Ù„Ø§Ø³Ù…ØŒ item[2] Ù‡Ùˆ Ø§Ù„Ø³Ø¹Ø±
                    html += `<div class="card">
                        <div>
                            <strong>${item[0]}</strong><br>
                            <span class="price">${item[2]} Ø¯Ø¬ / ${item[1]}</span>
                        </div>
                        <button class="btn-add" onclick="addToCart('${item[0]}', ${item[2]})">Ø¥Ø¶Ø§ÙØ© +</button>
                    </div>`;
                });
                document.getElementById('products-list').innerHTML = html;

                // Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØµÙ„ÙŠÙ† (Ù…Ù† ÙˆØ±Ù‚ØªÙƒ Delivery)
                let delHtml = '';
                data.delivery.forEach(del => {
                    // Ø­Ø³Ø¨ ØªØ±ØªÙŠØ¨ Ø¬Ø¯ÙˆÙ„Ùƒ: del[2] Ù‡Ùˆ Ø§Ù„Ø§Ø³Ù…ØŒ del[0] Ù‡ÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
                    delHtml += `<div class="card">
                        <div>
                            <strong>ğŸšš Ø§Ù„Ù…ÙˆØµÙ„: ${del[2]}</strong><br>
                            <span class="delivery-info">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${del[0]} | Ù‡Ø§ØªÙ: ${del[1]}</span>
                        </div>
                    </div>`;
                });
                document.getElementById('deliverers-list').innerHTML = delHtml;
            });

    function addToCart(name, price) {
        cart.push(name);
        total += price;
        document.getElementById('total-price').innerText = total;
        document.getElementById('cart-bar').style.display = 'block';
    }

    function sendOrder() {
        const orderList = cart.join(", ");
        const message = `Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…Ù†ØµØ© Ø®Ø¯Ù…Ø§ØªÙŠ:\nğŸ“¦ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª: ${orderList}\nğŸ’° Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø¯Ø¬`;
        window.open(`https://wa.me/213xxxxxxxxx?text=${encodeURIComponent(message)}`);
    }
</script>

</body>
</html>